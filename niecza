#!/usr/bin/perl

use lib 'src';
use Niecza::Frontend::STD;
use Niecza::Backend::NAM;
use Niecza::Pass::Beta;
use Niecza::Pass::Simplifier;
use Niecza::Pass::Begin;
use Niecza::Compiler;
use Metamodel;

my $parser = Niecza::Frontend::STD->new(lang=>'CORE');

my $begin = Niecza::Pass::Begin->new();
my $beta = Niecza::Pass::Beta->new();
my $simplifier = Niecza::Pass::Simplifier->new();

my $backend = Niecza::Backend::NAM->new();

my $compiler = Niecza::Compiler->new(
    frontend =>$parser,
    passes  => [$begin,$beta,$simplifier],
    backend => $backend
);

$compiler->compile('1','foo.p6','file.nam');


